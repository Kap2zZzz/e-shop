@model IEnumerable<string>
@{
    int i = 0;
    e_shop.Concrete.EFProductRepository _product = new e_shop.Concrete.EFProductRepository();
}
<div class="panel-group" id="accordion" style="margin-bottom:5px;">
    <div class="panel panel-default @("" == TempData["category"].ToString() ? " panel-primary" : " panel-default")" id="firsElementMenu">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#">
                    <span class="glyphicon glyphicon-folder-close">
                    </span>@Html.ActionLink("Усі товари", "List", "Product")
                </a>
            </h4>
        </div>
    </div>
    @foreach (var link in Model)
    {
        i++;
        <div class="panel panel-default @(link == TempData["category"].ToString() ? " panel-primary" : " panel-default")">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#@i">
                        <span class="glyphicon glyphicon-folder-close @(link == TempData["category"].ToString() ? " glyphicon-folder-open" : " glyphicon-folder-close")">
                        </span>@link
                    </a>
                </h4>
            </div>
            <div id="@i" class="panel-collapse collapse @(link == TempData["category"].ToString() ? " in" : "")">
                <div class="panel-body">
                    <table class="table">
                        @{
        var groupBrand = _product.Products.Where(p => p.Category == link).GroupBy(x => x.Brand);
                        }
                        @foreach (var p in groupBrand)
                        {
                            <tr>
                                <td>
                                    <a href="@Url.Action("List", "Product", new {filter = @p.Key,  category = link, page = 1 })">@p.Key</a>
                                </td>
                            </tr>
                        }
                    </table>
                </div>
            </div>
        </div>
    }
</div>
